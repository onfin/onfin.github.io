
<!DOCTYPE html>
<html lang="ru">
<head>
    <title>Ипотека / аренда + инвестирование</title>
    <meta charset="utf-8" />    <link rel="canonical" href="/calculators/mortgage" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/style.css" />
    <link rel="icon" type="image/png" href="/images/favicon.png"/>        <meta name="description" content="Что выгоднее: купить квартиру сразу, в ипотеку, продолжать снимать? Погашать ли ипотеку досрочно?" />        <meta name="keywords" content="калькулятор, кредит, аннуитет, ипотека, аренда, инвестирование, что выгоднее" />
<meta property="og:locale" content="ru" />    <meta property="og:type" content="website" /><meta property="og:title" content="" />
<meta property="og:url" content="https://onfin.github.io/calculators/mortgage" />
</head>

<body>
    <header>
<nav class="menu">
    <label class="menu-container" for="toggle-menu">
        <div class="menu-head">
            <a href='/' class="menu-home">Житейские воззрения пана Семушельского</a>
            <div class="social">
                <a href="https://t.me/on_fin" class="menu-link"><i class="share">&#xea95;</i></a>
                <a href="/feed.atom.xml" class="menu-link"><i class="share">&#xea9b;</i></a>
                <a href="/updates" class="menu-link"><i class="share">&#xe953;</i></a>
            </div>
        </div>
        <span class="checkmark">&equiv;</span>
    </label>
    <input type="checkbox" id="toggle-menu" class="toggle-menu" />
    <ul class="menu">            <li class="menu-item"><a href="/literacy" class="menu-link">Грамотность</a></li>            <li class="menu-item"><a href="/notes" class="menu-link">Заметки</a></li>            <li class="menu-item"><a href="/calculators" class="menu-link">Калькуляторы</a></li>            <li class="menu-item"><a href="/pages/sources" class="menu-link">Источники</a></li>    </ul>
</nav>    </header>
    <main>
        <article>
            <header>
                <h1> Ипотека / аренда + инвестирование </h1>
                <div class="meta"><p class=summary>Что выгоднее: купить квартиру сразу, в ипотеку, продолжать снимать? Погашать ли ипотеку досрочно?</p>
                    <p> Опубликовано: <time>2020-02-07</time> </p>
<p>Находится в:</p>
                    <ul>
    <a href='/calculators'>Калькуляторы</a>

    </ul>

                </div>
            </header>
            <div class="content">                <section id="">
<div class="meta">
</div>
<form class="calc-form" id="creditForm">
 <label for=initialCapital>Начальный капитал:</label> <input id=initialCapital type="number" step=1000 value=3000000 />
 <div class="comment">Остаток этой суммы (после уплаты первоначального взноса и расходов на оформление кредита) пойдёт на инвестирование.</div>

 <label for=income>Свободный доход:</label> <input id="income" type="number" step=1000 value=60000 />
 <div class="comment">Сколько у вас в среднем остаётся свободных денег в месяц, до платежей и прочих расходов по этому кредиту. Считается, что эта сумма растёт со скоростью инфляции. Инвестируется её остаток после ежемесячного платежа, уплаты ежегодных расходов и частичного досрочного погашения.</div>

 <label for=inflationRate>Ожидаемая инфляция, %г:</label> <input id="inflationRate" type="number" step=0.1 value=5 />
 <div class="comment">Ожидаемая средняя инфляция за весь срок кредита. В качестве ориентира можно взять значения с <a href="https://cbr.ru/hd_base/zcyc_params/zcyc/">кривой бескупонной доходности</a>.</div>

 <label for=investmentYield>Доходность вложений (сверх инфляции), %г:</label> <input id="investmentYield" type="number" step=0.1 value=5 />
 <div class="comment">Ожидаемая реальная доходность вашего инвестиционного портфеля.</div>
<p></p><p></p>

<label for=housePrice>Стоимость жилья:</label> <input id="housePrice" type="number" step=1000 value=3000000 onchange='setRentEst()' />


<label for=downpayment>Первоначальный взнос:</label> <input id="downpayment" type="number" step=1000 value=600000 onchange='setPayment()' />


<label for=initialFee>Первоначальные расходы:</label> <input id="initialFee" type="number" step=1000 value=15000 />
<div class="comment">Оценка недвижимости, комиссии за регистрацию и пр. При покупке новостройки — арендная плата за время строительства и расходы на ремонт.</div>

<label for=months>Срок кредита, мес:</label> <input id="months" type="number" step=1 value=360 onchange='setPayment()' />


<label for=interestRate>Процентная ставка по кредиту, %г:</label> <input id="interestRate" type="number" step=0.1 value=6.5 onchange='setPayment()' />
<div class="comment">Ежемесячный платёж будет: <strong><span id='monthlyPayment'></span></strong></div>

<label for=recurringFee>Ежегодные расходы, % от остатка кредита:</label> <input id="recurringFee" type="number" step=0.1 value=0.5 />
<div class="comment">На страхование недвижимости, жизни и здоровья.</div>

<label for=earlyRepay>На досрочное погашение, %:</label> <input id="earlyRepay" type="number" step=1 value=0 />
<div class="comment">Какой процент свободного ежемесячного дохода, после всех расходов по кредиту и жилью, направить на досрочное погашение. Оставшиеся деньги будут инвестированы.</div>
<p></p><p></p>

<label for=runningCosts>Эксплуатационные расходы в год:</label> <input id="runningCosts" type="number" step=1000 value=20000 />
<div class="comment">Среднегодовые расходы на текущий и косметический ремонт, которые вы несёте как собственник жилья, а также налоги. Без коммунальных платежей. Предполагается, что эта сумма растёт со скоростью инфляции. </div>

<label for=depreciation>Обветшание / восстановительный ремонт и страхование, %г от стоимости жилья:</label> <input id="depreciation" type="number" step=0.1 value=1.5 />
<div class="comment">Согласно <a href="https://www.nber.org/papers/w24112">исследованиям</a>, это 1,5-2%г. Если вы почему-то считаете, что дорожать (после поправки на инфляцию) ваше жильё будет быстрее, чем морально и физически устаревать, то сделайте значение в этом поле отрицательным. Но про эту корректировку всё равно не забудьте.</div>
<p></p><p></p>

<label for=rentPrice>Стоимость аренды аналогичного жилья в мес:</label> <input id="rentPrice" type="number" step=1000 value=20000 />
<div class="comment">Обычно это примерно 1/150 от его стоимости (т.е. <span id='rentEst'></span> для указанного значения). Предполагается, что она растёт со скоростью инфляции от начального значения (расходы на поддержание начальной стоимости жилья ложатся на арендодателя). Свободные деньги, оставшиеся после арендного платежа, инвестируются.</div>
</form>
<p><button onclick="calc(event)" ontouchstart="calc(event)">Рассчитать</button></p>
<div id="results">
</div>
<script type="text/javascript">
    function readForm() {
        const data = {};
        for (let i = 0; i < creditForm.elements.length; ++i) {
            const item = creditForm.elements[i];
            data[item.id] = Number(item.value);
        }
        return data;
    }

    function annuityPayment(sum, monthRate, months) {
        return sum*monthRate*Math.pow(1+monthRate, months)/(Math.pow(1+monthRate, months)-1);
    }

    function calc(e) {
        e && e.preventDefault();
        const data = readForm();
        const res = calcCreditSchedule(data);
        const res2 = calcRentSchedule(data);

        const sch = [];
        sch.push(`<tr>
            <th>Месяц</th>
            <th>Остаток кредита</th>
            <th>Сумма инвестиций</th>
            <th>Стоимость жилья</th>
            <th>Платёж по кредиту</th>
            <th>Досрочное погашение</th>
            <th>Прочие расходы</th>
        </tr>`);
        for (const s of res.schedule)
            sch.push(`
                <tr>
                    <td>${s.month}</td>
                    <td>${prettyNumber(Math.round(s.sum))}</td>
                    <td>${prettyNumber(Math.round(s.investment))}</td>
                    <td>${prettyNumber(Math.round(s.housePrice))}</td>
                    <td>${prettyNumber(Math.round(s.payment))}</td>
                    <td>${prettyNumber(Math.round(s.earlyRepay))}</td>
                    <td>${prettyNumber(Math.round(s.costs))}</td>
                </tr>
            `);

        results.innerHTML = `
            <p>
            Все цифры после поправки на инфляцию. Рассчитывается внутренняя норма доходности вложения начального капитала и свободных денег.
            <table>
                <tr><td colspan=2><strong>Покупка</strong></td></tr>
                <tr><td>Итоговый капитал</td><td>${prettyNumber(Math.round(res.investment+res.housePrice))}</td></tr>
                <tr><td>Итоговая доходность</td><td>${Math.round(res.yield*10000)/100}%г</td></tr>
                <tr><td>Лет до погашения</td><td>${Math.round(res.lastYear*10)/10}</td></tr>
                <tr><td colspan=2><strong>Аренда</strong></td></tr>
                <tr><td>Итоговый капитал</td><td>${prettyNumber(Math.round(res2.investment))}</td></tr>
                <tr><td>Итоговая доходность</td><td>${Math.round(res2.yield*10000)/100}%г</td></tr>
            </table>
            </p>

            <p>
            Погашение кредита.
            <table>
                ${sch.join('')}
            </table>
            </p>
        `;
    }


    function setPayment() {
        const data = readForm();
        let sum = data.housePrice-data.downpayment;
        const monthRate = data.interestRate/100/12;
        let pay = annuityPayment(sum, monthRate, data.months);
        monthlyPayment.innerHTML = Math.round(pay);
    }

    function setRentEst() {
        rentEst.innerHTML = Math.round(Number(housePrice.value)/150);
        setPayment();
    }
    setRentEst();

    function calcRentSchedule(data) {
        let investment = data.initialCapital;
        const monthYield = 1+data.investmentYield/100/12;

        const flows = [];
        let year = 0;
        flows.push([year, data.initialCapital]);
        for (let m = 1; m <= data.months; ++m) {
            year += 1/12;
            investment *= monthYield;
            investment += data.income - data.rentPrice;
            flows.push([year, data.income]);
        }
        year += 1/12;
        flows.push([year, -investment]);
        return {investment, yield: xirr(flows)};
    }

    function calcCreditSchedule(data) {
        let housePrice = data.housePrice;
        let sum = housePrice-data.downpayment;
        const monthInfl = data.inflationRate/100/12;
        const monthRate = data.interestRate/100/12;
        const monthYield = 1+(data.investmentYield + data.inflationRate)/100/12;
        const monthDepr = 1+data.depreciation/100/12;
        let pay = annuityPayment(sum, monthRate, data.months);

        let investment = data.initialCapital - data.downpayment - data.initialFee - sum * data.recurringFee/100;

        let year = 0;
        let inflCoeff = 1;
        const flows = [];
        const schedule = [];
        let lastYear = 0;
        flows.push([year, data.initialCapital]);
        schedule.push({month: 0, sum, investment, housePrice, payment: 0, earlyRepay: 0, costs: data.initialFee+sum * data.recurringFee/100});

        for (let m = 1; m <= data.months; ++m) {
            year += 1/12;
            investment *= monthYield;
            housePrice *= 1+monthInfl;
            housePrice /= monthDepr;
            sum -= pay - monthRate*sum;
            if (sum < 1 && lastYear == 0) {
                sum = 0;
                lastYear = year;
            }

            let income = data.income*inflCoeff - pay - data.runningCosts*inflCoeff/12;
            flows.push([year, data.income]);
            if (m % 12 == 0)
                income -= sum * data.recurringFee/100;
            const earlyRepay = Math.min(sum, income * data.earlyRepay/100);
            income -= earlyRepay;
            sum -= earlyRepay;
            investment += income;
            inflCoeff *= 1+monthInfl;
            schedule.push({month: m, sum: sum/inflCoeff, investment: investment/inflCoeff, housePrice: housePrice/inflCoeff, payment: pay/inflCoeff, earlyRepay: earlyRepay/inflCoeff, costs: (data.income*inflCoeff-income-pay-earlyRepay)/inflCoeff});
            pay = annuityPayment(sum, monthRate, data.months-m);
        };
        year += 1/12;
        flows.push([year, (-investment-housePrice)/inflCoeff]);
        if (lastYear == 0)
            lastYear = year;

        return {
            investment: investment/inflCoeff,
            housePrice: housePrice/inflCoeff,
            yield: xirr(flows),
            lastYear,
            schedule
        };
    }


    function findRoot(f, guess) {
        const precision = 1e-5;
        const maxIter = 200;
        const dx = precision;

        let it = 0;
        let prev = guess;
        do {
            prev = guess;
            const d = (f(guess + dx) - f(guess - dx)) / (2 * dx);
            if (Math.abs(d) < 1e-9)
                return undefined;
            guess -= f(guess)/d;
        }
        while (++it < maxIter && Math.abs(prev - guess) > precision)

        if (it < maxIter)
            return guess;
        return undefined;
    }


    function xirr(flows) {
        const lastYear = flows[flows.length-1][0];
        const npv = (r) => {
            let res = 0;
            for (let [y, f] of flows) {
                res += f * Math.pow(1+r, lastYear-y);
            }
            return res;
        }
        return findRoot(npv, Math.pow(-flows[flows.length-1][1]/flows[0][1], 1/lastYear)-1);
    }

    function prettyNumber(x) {
        // const repl = new RegExp('\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))', 'g');
        // return String(x).replace(repl, ".");
        return x.toLocaleString();
    }
  </script>
</section>
            </div>
            <hr>
            <aside class="links">
                <div>
                        <div class="up">
                            <span> &uarr; <a href='/calculators'> Калькуляторы</a> &uarr; </span>
                        </div>
<div class=categories>
                        Категории:<a href="/categories/instruments">Инструменты сбережений</a>
<a href="/categories/math">Математика</a>
<a href="/categories/persfin">Личные финансы</a>
                        </div>
                </div>
                <div>
            <div>Комментировать:
               <a href='https://t.me/on_fin/109' target="_blank">в Telegram <img src='/images/tg.svg' style='height: 0.7em; margin-left: -0.5ex; vertical-align: text-top'></a>.
            </div>
        <div>Подписаться:
            <a href="https://t.me/on_fin">Telegram</a>,
            <a href="/feed.atom.xml">RSS</a>,
            <a href="/updates">лента обновлений</a>.
        </div>            <div>Поддержать:
                <a href="https://www.patreon.com/blksv" target="_blank">Patreon</a>,
                <a href="https://paypal.me/blksv2" target="_blank">PayPal</a>,
                <a href="https://boosty.to/blksv" target="_blank">Boosty</a>,
                <a href="https://yoomoney.ru/to/410011254416486/500" target="_blank">YooMoney</a>,
                <details class="inline"><summary>Крипта.</summary>
                    <div style="font-size: 90%;">
                    Binance PayID: 534376682<br>
                    BTC: 1Q3tE4PnysfGAF59MM7Ren2r4FjAY213VC<br>
                    Ethereum (ETH, DAI, USDT, USDC, ...): 0x0b3a2c74b9dcc59621ab5943a8845e01a87aa932<br>
                    BNB Smart (BUSD, USDT, USDC, ...): 0x0b3a2c74b9dcc59621ab5943a8845e01a87aa932
                    </div>
                </details>
            </div>
    </div>
            </aside>
        </article>
    </main>

    <footer>
<div class="disclaimer">
    <p>Здесь я выкладываю лишь собственные размышления/исследования/расчёты, иногда собственное же изложение чужих мнений или результатов исследований. Размещённая информация может содержать ошибки, быть неактуальной на момент прочтения, допускать множество интерпретаций и проч. Я не занимаюсь образовательной деятельностью и не даю инвестиционных рекомендаций ни на этом сайте, ни в частном порядке.</p>

    <p>Может быть, вам показалось, но способов получить гарантированную доходность за счёт каких бы то ни было финансовых инструментов, портфелей или торговых стратегий НЕ СУЩЕСТВУЕТ. Хуже того, способов гарантированно сохранить свой капитал тоже НЕ СУЩЕСТВУЕТ.</p>

    <p>Материалы сайта могут быть использованы на условиях лицензии <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA</a>.
    <br> &copy; <a href="https://blksv.dev" rel="author">Андрей Болкисев</a>, 2025.
    </p>
</div>    </footer></body>
</html>