
<!DOCTYPE html>

<html lang="ru">
<head>
    <title>Расчёт эффективности инвестиций через американские, европейские и российские ETF</title>
    <meta charset="utf-8" />
    <link rel="canonical" href="/calculators/etf_us_eu_ru" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/style.css" />
    <link href="/feed.atom.xml" type="application/atom+xml" rel="alternate" title="Житейские воззрения пана Семушельского Atom Feed" />
        <meta name="description" content="Расчёт итоговой суммы капитала при инвестициях через американские, европейские и российские биржевые фонды" />
        <meta name="keywords" content="финансовая грамотность, брокерский счёт, ETF, биржевые фонды, американские ETF, ирландские ETF, российские ETF, инстранный брокер, налоги, трёхлетняя льгота, ЛДВ, валютная переоценка" />

<meta property="og:locale" content="ru" />
    <meta property="og:description" content="Расчёт итоговой суммы капитала при инвестициях через американские, европейские и российские биржевые фонды" />
    <meta property="og:type" content="article" />
        <meta property="og:article:published_time" content="2020-07-08" />
        <meta property="og:article:modified_time" content="2020-12-05" />
<meta property="og:title" content="Расчёт эффективности инвестиций через американские, европейские и российские ETF" />
<meta property="og:url" content="https://onfin.github.io/calculators/etf_us_eu_ru" />
        <style type="text/css">
    input {
        width: 100px
    }
    label {
        display: grid;
        grid-template-columns: 2fr 1fr;
    }
    .result {
        font-weight: bold;
    }
    .schedule {
        display: grid;
        grid-template-columns: 0.3fr 1fr 1fr 1fr;
    }

    .schedule span {
        text-align: right;
    }

    .button {
        text-decoration: underline dashed;
        cursor: pointer
    }
</style>





</head>
<body>
    <header>
        <nav class="menu">
            <label class="menu-container" for="toggle-menu">
                <div class="menu-head">
                    <a href="/" class="menu-link menu-link-home">Житейские воззрения пана Семушельского</a>
                    <div class="social">
                        <a href="https://t.me/on_fin" class="menu-link"><i class="share">&#xea9b;</i></a>
                        <a href="/feed.atom.xml" class="menu-link"><i class="share">&#xea9f;</i></a>
                    </div>
                </div>
                <div class="checkmark">&equiv;</div>
            </label>
            <input type="checkbox" id="toggle-menu" />
            <ul class="menu">
                    <li class="menu-item"><a href="/blog" class="menu-link">Сиюминутное</a></li>
                    <li class="menu-item"><a href="/literacy" class="menu-link">Грамотность</a></li>
                    <li class="menu-item"><a href="/notes" class="menu-link">Заметки</a></li>
                    <li class="menu-item"><a href="/pages/sources" class="menu-link">Источники</a></li>
                    <li class="menu-item"><a href="/calculators" class="menu-link">Калькуляторы</a></li>
            </ul>
        </nav>
    </header>

    <main>

<article>
    <header>
        <h1>Расчёт эффективности инвестиций через американские, европейские и российские ETF</h1>
        <div class="meta">
                <p class="description">Расчёт итоговой суммы капитала при инвестициях через американские, европейские и российские биржевые фонды</p>
                <p> Обновлено: <time>2020-12-05</time> </p>

        </div>
    </header>
    <div class="content">
        <img src='https://onfin.blksv.dev/begin.png' loading="lazy" style='position:absolute; width: 0; height: 0' />
        <p>По мотивам обсуждений в <a href="https://t.me/RationalAnswer_Chat">чате Павла Комаровского</a>, <a href="https://stockuper.ru/manual/voo-vs-fxus/">калькулятора на Stockuper</a>, и <a href="https://docs.google.com/spreadsheets/d/1GxvnqeEyW4UfphrhJzeUvmYNGxbXNUFvO_patoujPz4/edit#gid=20811719">гугл-таблички</a>. Несколько видоизменённый аналог <a href="/calculators/etf_taxation">этого калькулятора</a>.</p>
<p>Для начала перечислим основные факты:</p>
<ol>
<li>Российские ETF/БПИФ — дорогие (комиссия порядка 1%г против 0,05%г у иностранных).</li>
<li>Российские брокеры — дешёвые (практически у всех крупных брокеров единственная комиссия — <a href="/literacy/brokers">0,05% от объёма сделок, иногда 0,01%г за хранение ценных бумаг</a>).</li>
<li>С дивидендов, выплаченных фондом, всегда удерживается 13% налога.</li>
<li>Если фонд получает купоны/дивиденды из другой страны, он тоже платит налог в соответствии с законодательством страны-отправителя (найти среднюю ставку налога можно, как правило, только в отчётности фонда: разделив сумму полученных дивидендов на сумму удержанных в иностранных государствах налогов).</li>
<li>На фонды, торгующиеся на российских биржах, действует <a href="/literacy/iis">трёхлетняя льгота, ЛДВ</a>.</li>
</ol>
<p>Теперь сведём их все в калькулятор. Рассмотрим «американский» фонд — выплачивающий дивиденды, «европейский» — аккумулирующий дивиденды внутри себя, и «российский» — аккумулирующий и освобождённый от налогообложения при продаже (по ЛДВ или ИИС-Б).</p>
<p>Будем считать по схеме с постепенным накоплением и расходованием капитала.</p>
<p>Т.к. у нас тут европейсике и американские фонды, размер активов будем считать в долларах. Все расчёты — с поправкой на инфляцию страны проживания.</p>
<p>Налоги рассчитываются с номинального результата инвестиций по принципу FIFO: раньше купленные паи раньше и продаются.</p>
<p>«Валютная переоценка» учитывается величиной инфляции: на долгосроке расхождение валютных курсов будет приблизительно равно разнице в накопленных инфляциях. Поэтому два актива в разных валютах, но с одинаковой ожидаемой реальной доходностью, дадут в среднем одинаковые финансовые (и налоговые) результаты после пересчёта в валюту страны проживания.</p>
<div>
    <strong>Общие параметры</strong>
    <div>
        <label><span>Начальная стоимость активов, $:</span><input id="Sum" type="number" step=10 value=10000 onChange="onChange()" /></label>
        <label>Реальная ценовая доходность, %г: <input id="PriceY" type="number" step=0.1 value=3 onChange="onChange()" /></label>
        <label>Дивидендная доходность, %г: <input id="DivY" type="number" step=0.1 value=2 onChange="onChange()" /></label>
        <label>Налог на дивиденды, %: <input id="DivTax" type="number" step=1 value=13 onChange="onChange()" /></label>
        <label>Налог на прирост капитала, %г: <input id="GainTax" type="number" step=1 value=13 onChange="onChange()" /></label>
        <label>Инфляция страны проживания, %г: <input id="Infl" type="number" step=0.1 value=5 onChange="onChange()" /></label>
        <label>Ежемесячное пополнение на стадии накопления, $: <input id="ContribSum" type="number" step=100 value=1000 onChange="onChange()" /></label>
        <label>Продолжительность пополнений, лет: <input id="ContribLen" type="number" step=1 value=15 onChange="onChange()" /></label>
        <label>Ежемесячное изъятие на стадии расходования, $: <input id="WithdrawSum" type="number" step=100 value=1000 onChange="onChange()" /></label>
        <label>Продолжительность изъятий, лет: <input id="WithdrawLen" type="number" step=1 value=25 onChange="onChange()" /></label>
    </div>
    Подставить значения для типичного фонда <span class="button" onClick="setUS()">американских акций</span>,
    <span class="button" onClick="setEU()">европейских акций</span>,
    <span class="button" onClick="setRU()">российских акций</span>.
    <div>
        <div>
            <strong>Американский фонд</strong> (с выплатой дивидендов)
            <label>Комиссия фонда, %г: <input id="UsFee" type="number" step=0.01 value=0.01 onChange="onChange('us')"/></label>
            <label>Внутренний налог на дивиденды, %: <input id="UsDivTax" type="number" step=0.1 value=7 onChange="onChange('us')" /></label>
            <label>Брокерская комиссия с оборота и спред, %: <input id="UsBrkFee" type="number" step=0.01 value=0.1 onChange="onChange('us')" /></label>
            <label>Фикс. комиссия брокера, $: <input id="UsFix" type="number" step=1 value=10 onChange="onChange('us')" /></label>
            <label>Остаток, $: <span id="UsBalance" class="result"></span></label>
            <details><summary>Подробнее</summary>
                <div class="schedule">
                    <span>Год</span>
                    <span>Стоимость пая</span>
                    <span>Стоимость активов</span>
                    <span>Заплаченные комиссии и налоги</span>
                </div>
                <div id="UsSchedule" class="schedule"></div>
            </details>
        </div>
        <div>
            <strong>Европейский фонд</strong> (с аккумулированием дивидендов)
            <label>Комиссия фонда, %г: <input id="EuFee" type="number" step=0.01 value=0.2 onChange="onChange('eu')" /></label>
            <label>Внутренний налог на дивиденды, %: <input id="EuDivTax" type="number" step=0.1 value=7 onChange="onChange('eu')" /></label>
            <label>Брокерская комиссия с оборота и спред, %: <input id="EuBrkFee" type="number" step=0.01 value=0.1 onChange="onChange('us')" /></label>
            <label>Фикс. комиссия брокера, $: <input id="EuFix" type="number" step=1 value=10 onChange="onChange('eu')" /></label>
            <label>Остаток, $: <span id="EuBalance" class="result"></span></label>
            <details><summary>Подробнее</summary>
                <div class="schedule">
                    <span>Год</span>
                    <span>Стоимость пая</span>
                    <span>Стоимость активов</span>
                    <span>Заплаченные комиссии и налоги</span>
                </div>
                <div id="EuSchedule" class="schedule"></div>
            </details>
        </div>
            <strong>Российский фонд</strong> (с аккумулированием дивидендов и ЛДВ)
            <label>Комиссия фонда, %г: <input id="RuFee" type="number" step=0.01 value=0.7 onChange="onChange('ru')" /></label>
            <label>Внутренний налог на дивиденды, %: <input id="RuDivTax" type="number" step=0.1 value=7 onChange="onChange('ru')" /></label>
            <label>Брокерская комиссия с оборота и спред, %: <input id="RuBrkFee" type="number" step=0.01 value=0.1 onChange="onChange('us')" /></label>
            <label>Фикс. комиссия брокера, $: <input id="RuFix" type="number" step=1 value=0 onChange="onChange('eu')" /></label>
            <label>Остаток, $: <span id="RuBalance" class="result"></span></label>
            <details><summary>Подробнее</summary>
                <div class="schedule">
                    <span>Год</span>
                    <span>Стоимость пая</span>
                    <span>Стоимость активов</span>
                    <span>Заплаченные комиссии и налоги</span>
                </div>
                <div id="RuSchedule" class="schedule"></div>
            </details>
        </div>
    </div>

</div>

<script type="text/javascript">
    function calcBalance(fundFee, divTax, gainTax, brkFee, brkFix, distr) {
        console.log(divTax);
        let sum = Number(Sum.value);
        let divY = Number(DivY.value)/100/12;
        let infl = Number(Infl.value)/100/12 + 1;
        let priceY = (Number(PriceY.value)/100/12 + 1)*infl;
        let contribSum = Number(ContribSum.value);
        let contribLen = Number(ContribLen.value)*12;
        let withdrawSum = Number(WithdrawSum.value);
        let withdrawLen = Number(WithdrawLen.value)*12;

        let curPrice = 1;
        let priceHist = [];
        let inflIndex = 1;
        let n = sum/curPrice;
        schedule = []
        year_fee = 0;
        for (let m = 1; m < contribLen+1; ++m) {
            inflIndex *= infl;
            curPrice *= priceY;
            const div = curPrice * divY * (1-divTax);
            const paidDiv = (distr ? div : 0);
            curPrice += (distr ? 0 : div);
            const f = curPrice*fundFee;
            curPrice -= curPrice*fundFee;

            const exp = brkFix + (contribSum*inflIndex + n*paidDiv)*brkFee;
            const dn = (contribSum*inflIndex + n*paidDiv - exp)/curPrice;
            n += dn;

            priceHist.push([curPrice, dn]);

            year_fee += (f + exp + (n*curPrice*divY) - (n*curPrice*divY)*(1-divTax))/inflIndex
            if (m % 12 == 0) {
                schedule.push([curPrice/inflIndex, curPrice*n/inflIndex, year_fee]);
                year_fee = 0;
            }
        }

        const doSell = (price, amount) => {
            let rem = amount/price;
            let base = 0;
            for (let i = 0; i < priceHist.length; ++i) {
                let [p, n] = priceHist[i];
                if (n < rem) {
                    rem -= n;
                    base += p*n;
                    priceHist[i] = [p, 0];
                }
                else {
                    base += p*rem;
                    priceHist[i] = [p, n-rem];
                    break;
                }
            }
            return amount-base;
        }

        for (let m = 1; m < withdrawLen+1; ++m) {
            inflIndex *= infl;
            curPrice *= priceY;
            const div = curPrice * divY * (1-divTax);
            const paidDiv = (distr ? div : 0);
            curPrice += (distr ? 0 : div);
            const f = curPrice*fundFee;
            curPrice -= curPrice*fundFee;

            const sellAmount = withdrawSum*inflIndex - n*paidDiv;
            const gain = sellAmount > 0 ? doSell(curPrice, sellAmount) : 0;
            const exp = brkFix + (Math.abs(sellAmount) + n*paidDiv)*brkFee + gain * gainTax;
            dn = (sellAmount + exp)/curPrice
            n -= dn;
            if (dn < 0)
                priceHist.push([curPrice, dn]);

            year_fee += (f + exp + (n*curPrice*divY) - (n*curPrice*divY)*(1-divTax))/inflIndex;
            if (m % 12 == 0) {
                schedule.push([curPrice/inflIndex, curPrice*n/inflIndex, year_fee]);
                year_fee = 0;
            }
        }

        return [n*curPrice/inflIndex, schedule];
    }

    function setUS() {
        UsFee.value = 0.01;
        UsDivTax.value = 0;
        EuFee.value = 0.1;
        EuDivTax.value = 15;
        RuFee.value = 0.9
        RuDivTax.value = 15;
        onChange();
    }

    function setEU() {
        UsFee.value = 0.09;
        UsDivTax.value = 10;
        EuFee.value = 0.1;
        EuDivTax.value = 6;
        RuFee.value = 0.9
        RuDivTax.value = 6;
        onChange();
    }

    function setRU() {
        UsFee.value = 0.5;
        UsDivTax.value = 15;
        EuFee.value = 0.7;
        EuDivTax.value = 15;
        RuFee.value = 1;
        RuDivTax.value = 0;
        onChange();
    }

    function onChange() {
        let [bal, sch] = calcBalance(
            Number(UsFee.value)/100/12,
            (1+Number(UsDivTax.value)/100)*(1+Number(DivTax.value)/100)-1,
            Number(GainTax.value)/100,
            Number(UsBrkFee.value)/100, Number(UsFix.value), true);
        UsBalance.innerHTML = bal.toFixed(0);
        UsSchedule.innerHTML = sch.map((v, i) => `<span>${i+1}</span><span>${v[0].toFixed(2)}</span><span>${v[1].toFixed(2)}</span><span>${v[2].toFixed(2)}</span>`).join("\n");

        [bal, sch] = calcBalance(
            Number(EuFee.value)/100/12, Number(EuDivTax.value)/100, Number(GainTax.value)/100,
            Number(EuBrkFee.value)/100, Number(EuFix.value), false);
        EuBalance.innerHTML = bal.toFixed(0);
        EuSchedule.innerHTML = sch.map((v, i) => `<span>${i+1}</span><span>${v[0].toFixed(2)}</span><span>${v[1].toFixed(2)}</span><span>${v[2].toFixed(2)}</span>`).join("\n");

        [bal, sch] = calcBalance(
            Number(RuFee.value)/100/12, Number(RuDivTax.value)/100, 0,
            Number(RuBrkFee.value)/100, Number(RuFix.value), false);
        RuBalance.innerHTML = bal.toFixed(0);
        RuSchedule.innerHTML = sch.map((v, i) => `<span>${i+1}</span><span>${v[0].toFixed(2)}</span><span>${v[1].toFixed(2)}</span><span>${v[2].toFixed(2)}</span>`).join("\n");
    }

    onChange();
</script>
        <img src='https://onfin.blksv.dev/end.png' loading="lazy" style='width: 0; height: 0' />
    </div>
    <aside>
        <div style="display: flex; flex-direction: column; text-align: right;">
        <div class="share-buttons">
            <a href="https://vk.com/share.php?url=https://onfin.github.io/calculators/etf_us_eu_ru&title=Расчёт эффективности инвестиций через американские, европейские и российские ETF&description=Расчёт итоговой суммы капитала при инвестициях через американские, европейские и российские биржевые фонды" target="_blank"><i class="share">&#xea9d;</i></a>
            <a href="https://t.me/share/url?url=https://onfin.github.io/calculators/etf_us_eu_ru" target="_blank"><i class="share">&#xea9b;</i></a>
            <a href="https://twitter.com/intent/tweet?text=https://onfin.github.io/calculators/etf_us_eu_ru" target="_blank"><i class="share">&#xea9c;</i></a>
            <a href="https://www.facebook.com/sharer/sharer.php?u=https://onfin.github.io/calculators/etf_us_eu_ru" target="_blank"><i class="share">&#xea93;</i></a>

        </div>
        <a class="donate-button" href="/donate">Отблагодарить</a>
    </div>
    </aside>
</article>

    </main>

    <footer>


        <div class="disclaimer">
            <p>Здесь я выкладываю лишь собственные размышления/исследования/расчёты, иногда собственное же изложение чужих мнений или результатов исследований. Размещённая информация может содержать ошибки, быть неактуальной на момент прочтения, допускать множество интерпретаций и проч. Я не занимаюсь образовательной деятельностью и не даю инвестиционных рекомендаций ни на этом сайте, ни в частном порядке.</p>

            <p>Может быть, вам показалось, но способов получить гарантированную доходность за счёт каких бы то ни было финансовых инструментов, портфелей или торговых стратегий НЕ СУЩЕСТВУЕТ. Хуже того, способов гарантированно сохранить свой капитал тоже НЕ СУЩЕСТВУЕТ.</p>

            <p>Материалы сайта могут быть использованы на условиях лицензии <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA</a>.
            <br> &copy; <a href="https://t.me/blksv" rel="author">Андрей Болкисев</a>, 2020.
            </p>
        </div>
    </footer>
</body>
</html>